const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CodeEditor-CpzIe8DH.js","assets/index-WJajgRhe.js","assets/vendor-De1_G7BA.js","assets/index-n9FPi0tC.css","assets/SyntaxHighlighter-D8fPOdop.js","assets/index-Dmtc6tcF.js","assets/dialog-CiaOOFul.js","assets/check-p0VMm9tA.js","assets/tools-BR6hBggJ.js","assets/textarea-CGk-8EaO.js"])))=>i.map(i=>d[i]);
import{E as cn,r as z,j as l,U as rr,V as ir,W as sr,b as hn,X as Lt,J as ar,B as Xe,Y as gt,Z as or,_ as lr,$ as ur,a0 as Mt,a1 as dn,a2 as cr,p as hr,a3 as dr,a4 as mr}from"./vendor-De1_G7BA.js";import{h as $e,o as fr,e as mn,l as fn,f as pn,g as gn,i as xn,j as Ft,D as bn,a as kn,b as yn,F as pr,p as gr,q as wn,c as et,r as xr,u as jn,R as br,T as kr,P as yr,C as Sn,v as wr,X as Cn,w as vn,x as In,O as zn,y as vt,z as En,A as Nn,B as jr,E as Sr,G as Cr,H as vr,I as Ir,J as zr,n as Er,t as Nr,s as Tr,d as Ar}from"./dialog-CiaOOFul.js";import{T as ce,a as he,b as de,d as Lr,_ as It,c as fe,B as X,e as Mr,u as Fr,M as Pr}from"./index-WJajgRhe.js";import{u as Ae,c as ne,a as _r,b as Dr,g as Br,t as Rr}from"./tools-BR6hBggJ.js";import{a as Or}from"./check-p0VMm9tA.js";import{T as Hr}from"./textarea-CGk-8EaO.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Or("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);function Tn(e,t){if(typeof document>"u")return;const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style={position:"absolute",left:"-9999px"},document.body.appendChild(n);const r=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;n.select();let i=!1;try{i=!!document.execCommand("copy")}catch{i=!1}document.body.removeChild(n),r&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))}function qr(){const t=cn().id??"new",n=Ae($e({id:t})),[r,i]=z.useState(!1),[s,a]=z.useState();return z.useEffect(()=>{r&&fr(t,n).then(()=>{Tn(document.location.href.replace("/ai","/ai/shared"))}).catch(o=>{console.error("Share error",o),a(o.toString())})},[t,n,r]),l.jsxs(mn,{onOpenChange:o=>i(o),children:[l.jsx(fn,{asChild:!0,children:l.jsx("button",{type:"button","aria-label":"Share",className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:l.jsx(rr,{})})}),l.jsxs(pn,{className:"sm:max-w-[425px]",children:[l.jsxs(gn,{children:[l.jsx(xn,{children:"Share"}),s?l.jsx(Ft,{className:"mb-2 text-red-500 dark:text-red-400",children:s}):l.jsx(Ft,{children:"Copy the link below to share your creation"})]}),l.jsx("div",{className:"items-center",children:l.jsx("input",{type:"text",value:document.location.href.replace("/ai","/ai/shared"),className:"w-full p-3"})})]})]})}function rt({mode:e="html",error:t,loading:n=!1}){const r=n?"animate-pulse":"";return t?l.jsx("div",{className:"mx-auto mt-10 max-w-[80%]",children:l.jsx("div",{className:"bg-secondary text-black dark:text-white",children:l.jsxs("div",{role:"alert",className:"relative mb-2 rounded border-l-4 border-red-500 p-4",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:t})]})})}):l.jsxs("div",{className:"mx-auto max-w-lg",children:[" ",l.jsxs("div",{role:"status",className:`my-7 ${r}`,children:[" ",l.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),e==="html"&&l.jsxs("div",{role:"status",className:`mb-7 max-w-lg ${r}`,children:[" ",l.jsxs("div",{className:"flex h-48 w-full items-center justify-center rounded bg-zinc-300 dark:bg-zinc-700",children:[" ",l.jsx("svg",{className:"h-12 w-12 text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512",children:l.jsx("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})})," "]}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),l.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),l.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),l.jsxs("div",{role:"status",className:`mb-6 mt-7 ${r}`,children:[" ",l.jsx("div",{className:"mb-4 h-2.5 w-48 rounded-full bg-zinc-300 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[380px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[500px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]}),l.jsxs("div",{role:"status",className:`my-6 ${r}`,children:[" ",l.jsx("div",{className:"mb-2.5 h-2 max-w-[460px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("div",{className:"mb-2.5 h-2 max-w-[450px] rounded-full bg-zinc-200 dark:bg-zinc-700"}),l.jsx("span",{className:"sr-only",children:"Loading..."})," "]})]})}rt.defaultProps={error:void 0,mode:"html"};const $r=z.lazy(async()=>It(()=>import("./CodeEditor-CpzIe8DH.js"),__vite__mapDeps([0,1,2,3])));function Ur(e,t){const n=new RegExp(Object.keys(t).join("|"),"g");return e.replace(n,r=>t[r.toLowerCase()])}function Wr(e){return`export default function Widget() {
    return (
${Ur(e,{"class=":"className=","for=":"htmlFor=","-rule":"Rule","stroke-l":"strokeL","stroke-w":"strokeW","<!--":"{/*","-->":"*/}",tabindex:"tabIndex",colspan:"colSpan:",rowspan:"rowSpan:","aria-*":"aria-*","data-*":"data-*",onclick:"onClick",onchange:"onChange",onblur:"onBlur"}).split(`
`).map(r=>`        ${r}`).join(`
`)}
    )
}`}function Qr({id:e,code:t,shared:n}){const r=Ae($e({id:e})),[i,s]=ne(xr),[a,o]=ne(jn),[m,u]=z.useState(t);z.useEffect(()=>{var c;u(i==="jsx"?Wr(t):i==="html"?t:((c=r.components)==null?void 0:c[i])??"Loading...")},[i,t,r.components]),z.useEffect(()=>{a&&s(a)},[a,s]);const h=["html"];return r.components?h.push(...Object.keys(r.components)):h.push("jsx"),l.jsx("div",{className:"code-syntax-wrapper",children:l.jsxs("div",{className:"code-syntax relative border",children:[l.jsxs("div",{className:"grid w-full grid-cols-2 rounded-t-md border-b",children:[l.jsxs("ul",{className:"flex text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:[h.map(c=>l.jsx("li",{children:l.jsx("button",{type:"button",onClick:()=>s(c),className:`inline-block w-full border-r p-2 px-3 text-secondary-foreground ${c===i?"bg-background":"bg-secondary hover:bg-background"}`,children:c.toUpperCase()})},c)),l.jsx("li",{children:l.jsxs(bn,{children:[l.jsx(kn,{asChild:!0,children:l.jsx("button",{type:"button","aria-label":"Convert HTML to a framework",className:"inline-block w-full border-r bg-secondary p-[10px] text-secondary-foreground hover:bg-background",children:l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(ir,{})}),l.jsx(de,{side:"bottom",children:"Convert HTML to a framework"})]})})}),l.jsxs(yn,{side:"top",children:[l.jsx(gr,{children:"Convert to"}),l.jsx(wn,{}),pr.map(c=>l.jsx(et,{onClick:()=>{o(c)},children:c.toLocaleUpperCase()},c))]})]})},"new")]}),l.jsxs("div",{className:"flex justify-end",children:[e!=="new"&&!n&&l.jsx(qr,{}),l.jsx("button",{type:"button","aria-label":"Download",onClick:()=>{const c=i==="html"?".html":".js";Lr(t,i==="html"?"text/html":"application/javascript",`${r.name}${c}`)},className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:l.jsx(sr,{})}),l.jsxs("button",{type:"button",onClick:()=>Tn(m),className:"flex items-center border-l px-3 text-sm text-secondary-foreground hover:bg-background",children:[l.jsxs("svg",{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:[l.jsx("path",{d:"M5 9V4.13a2.96 2.96 0 0 0-1.293.749L.879 7.707A2.96 2.96 0 0 0 .13 9H5Zm11.066-9H9.829a2.98 2.98 0 0 0-2.122.879L7 1.584A.987.987 0 0 0 6.766 2h4.3A3.972 3.972 0 0 1 15 6v10h1.066A1.97 1.97 0 0 0 18 14V2a1.97 1.97 0 0 0-1.934-2Z"}),l.jsx("path",{d:"M11.066 4H7v5a2 2 0 0 1-2 2H0v7a1.969 1.969 0 0 0 1.933 2h9.133A1.97 1.97 0 0 0 13 18V6a1.97 1.97 0 0 0-1.934-2Z"})]})," ",l.jsx("span",{className:"copy-text",children:"Copy"})]})]})]}),l.jsx("div",{className:"relative bg-zinc-50 dark:bg-zinc-900",children:l.jsx("div",{className:"max-h-[24vh] overflow-scroll pb-8 text-sm",tabIndex:-1,children:l.jsx(z.Suspense,{fallback:l.jsx(rt,{loading:!0}),children:t?l.jsx($r,{code:m,framework:i}):void 0})})})]})})}function An({className:e,style:t,callback:n}){const r=["Create a responsive navigation bar with dropdown menus, using a dark theme.","I need a user profile card with an avatar, name, and social media links in Tailwind CSS.","Generate a modal popup for user feedback, including text area and submit button.","Can you make a pricing table with three tiers, highlighting the best value tier?","Build a responsive image gallery grid that supports lightbox viewing.","I'm looking for a login form with email and password fields, plus a remember me checkbox.","Design a newsletter signup section with an input field and a subscribe button, featuring a minimalist aesthetic.","Create a footer with columns for links, a brief about section, and social media icons.","Generate a dashboard layout with a sidebar navigation, header, and content area.","I need an accordion FAQ section where questions expand to show answers on click.","Produce a blog post template with a featured image, title, date, author, and content area.","Design a to-do list app interface with tasks, checkboxes, and an add task form.","Create a progress bar component that shows percentage completion and can be styled dynamically.","Generate a contact form with name, email, message fields, and a send button, with validation styles.","Design a carousel slider for featured articles with previous and next controls, using a sleek, modern look.","Create a set of social share buttons with icons for Facebook, Twitter, LinkedIn, and Instagram, with a hover effect.","Generate a responsive table with sortable columns, row highlight on hover, and pagination.","I need a card layout for product listings, including an image, title, price, and 'Add to Cart' button.","Build a timeline component for displaying a project's milestones, with vertical lines and circular markers.","Design a weather widget showing the current temperature, weather condition icons, and a 5-day forecast.","Create an alert component with success, warning, and error variations that can be dismissed.","Generate a multi-step form for a checkout process, including progress indicators.","I'm looking for a tab component with horizontal navigation and dynamically loaded content.","Design a search bar with autocomplete suggestions that appear as the user types.","Create a sticky header that becomes visible when scrolling up and hides on scrolling down.","Generate a set of animated loading spinners with different styles for asynchronous data loading.","I need a grid of cards for team members, including photo, name, role, and a short bio, with a flip effect on hover.","Build a testimonial slider with quotes from customers, including their names and photos.","Design a date picker component that integrates with a form and supports range selection.","Generate a set of badges for different status levels like New, In Progress, and Completed, with customizable colors."],[i,s]=z.useState([]);return z.useEffect(()=>{const a=new Set;for(;a.size<3;)a.add(Math.floor(Math.random()*r.length));s([...a])},[r.length]),l.jsxs("div",{className:fe(e,"flex flex-wrap items-center justify-center gap-2 transition-all duration-500"),style:t,children:[l.jsx("button",{onClick:()=>n(r[i[0]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-teal-400 to-blue-500 px-4 py-2 text-white transition-all hover:from-teal-500 hover:to-blue-600",children:l.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[0]]})}),l.jsx("button",{onClick:()=>n(r[i[1]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-purple-400 to-pink-500 px-4 py-2 text-white transition-all hover:from-purple-500 hover:to-pink-600",children:l.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[1]]})}),l.jsx("button",{onClick:()=>n(r[i[2]]),type:"button",className:"w-xs min-w-xs max-w-xs cursor-pointer truncate rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 px-4 py-2 text-white transition-all hover:from-yellow-500 hover:to-orange-600",children:l.jsx("span",{className:"transition-all hover:-ml-96 hover:mr-36",style:{transitionDuration:"3000ms"},children:r[i[2]]})})]})}An.defaultProps={className:"",style:{}};const Zr=br,Yr=kr,Gr=yr,Ln=z.forwardRef(({className:e,...t},n)=>l.jsx(zn,{className:fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Ln.displayName=zn.displayName;const Jr=hn("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Mn=z.forwardRef(({side:e="right",className:t,children:n,...r},i)=>l.jsxs(Gr,{children:[l.jsx(Ln,{}),l.jsxs(Sn,{ref:i,className:fe(Jr({side:e}),t),...r,children:[n,l.jsxs(wr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(Cn,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mn.displayName=Sn.displayName;const Fn=({className:e,...t})=>l.jsx("div",{className:fe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Fn.displayName="SheetHeader";const Pn=z.forwardRef(({className:e,...t},n)=>l.jsx(vn,{ref:n,className:fe("text-lg font-semibold text-foreground",e),...t}));Pn.displayName=vn.displayName;const _n=z.forwardRef(({className:e,...t},n)=>l.jsx(In,{ref:n,className:fe("text-sm text-muted-foreground",e),...t}));_n.displayName=In.displayName;function Kr({onDropFile:e,onClick:t}){const[n,r]=z.useState(!1);return l.jsx("div",{className:"flex h-full items-center bg-background",onKeyUp:i=>{i.key==="Enter"&&t()},role:"button",tabIndex:0,onClick:t,onDragEnter:()=>r(!0),onDragExit:()=>r(!1),onDrop:i=>{i.preventDefault(),r(!1);let s;if(i.dataTransfer.items.length>0){for(const a of i.dataTransfer.items)if(a.kind==="file"){if(s=a.getAsFile(),s!=null&&s.type.startsWith("image/"))break;s=void 0}}else for(const a of i.dataTransfer.files){if(a.type.startsWith("image/"))break;s=void 0}i.dataTransfer.clearData(),s?(console.log("Got file type",s.type),e(s)):alert("Only images are supported")},onDragOver:i=>{i.preventDefault()},children:l.jsxs("label",{className:"relative mx-auto h-64 w-64 cursor-pointer rounded-lg bg-white p-4 text-center text-zinc-600 shadow-lg dark:bg-zinc-800",children:[l.jsx("div",{className:"mb-5 text-6xl",children:"📸"}),l.jsx("span",{className:"text-lg",children:"Drag a screenshot of UI or click me to upload one."}),l.jsx("div",{className:"mt-2 text-sm",children:"You can also just explain what you want in the text box below."}),l.jsx("div",{className:fe("absolute inset-0 h-full w-full rounded-lg border-2 border-dashed border-zinc-400 bg-transparent",n&&"border-zinc-100")})]})})}function Xr(){const[e,t]=ne(vt);return l.jsx("div",{className:"flex h-full items-center bg-background",children:l.jsxs("div",{className:"relative mx-auto",children:[l.jsx(Cn,{onClick:()=>t(""),className:"absolute text-zinc-600 dark:text-zinc-400 right-1 top-1 cursor-pointer"}),l.jsx("img",{className:"mx-auto object-contain  h-64 w-64  rounded-lg text-center text-zinc-600 shadow-lg dark:bg-zinc-800",src:e})]})})}const ei=z.lazy(async()=>It(()=>import("./SyntaxHighlighter-D8fPOdop.js"),__vite__mapDeps([4,2,1,3]))),ti=z.lazy(async()=>It(()=>import("./index-Dmtc6tcF.js"),__vite__mapDeps([5,2,6,7,1,3,8,9])));function ni(e){const t="    ";let n="",r="";for(const i of e.split(/>\s*</))/^\/\w/.test(i)&&(r=r.slice(t.length)),n+=`${r}<${i}>
`,/^<?\w[^>]*[^/]$/.test(i)&&!i.startsWith("input")&&(r+=t);return n.slice(1,-2)}function ri(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}function ii(e){const n=(e.markdown??"").split(`---

`);n[0].includes("name: ")&&n.shift();let{prompt:r}=e;return n.map(i=>{const s=i.replace(/---\nprompt:.+\n/m,""),a=`### ${r}

`,o=i.split(`---
`);return(o[1]||"").startsWith("prompt:")&&(r=o[1].replace("prompt:","").trim()),i.startsWith("<")?`${a}\`\`\`html
${s}
\`\`\``:a+s}).join(`
`)}function Dn({html:e,error:t,js:n,id:r,rendering:i,imageUploadRef:s}){const a=document.location.hostname.includes("127.0.0.1")?"http://127.0.0.1:7878":"https://wandb.github.io",o=z.useRef(null),m=Ae($e({id:r})),u=_r(En),[h,c]=ne(vt),[g,d]=ne(Nn),[S,L]=ne(jr),[F,k]=z.useState(!1),[B,y]=z.useState(!1),[C,P]=z.useState(),[b,j]=z.useState("desktop");return z.useLayoutEffect(()=>{L(window.matchMedia("(prefers-color-scheme: dark)").matches)},[L]),z.useEffect(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]),z.useEffect(()=>{var M;C||k(!1),o.current&&((M=o.current.contentWindow)==null||M.postMessage({html:C,js:i?[]:n,darkMode:S,action:"hydrate"},"*"))},[C,S,n,i,o]),z.useEffect(()=>{var M,N;if(o.current){let A=e.split(`
`);const v=80,I=3,V=-1;if((M=A.at(V))!=null&&M.startsWith("<!--")){const q=A.pop();A=[...A,...ri(q??"",v)]}else(N=A.at(V))!=null&&N.endsWith(">")||A.pop();(A.length>I||!i)&&P(A.join(`
`))}},[e,i]),z.useEffect(()=>{const M=N=>{var A,v;N.origin===a&&(N.data.action==="ready"?C&&((v=(A=o.current)==null?void 0:A.contentWindow)==null||v.postMessage({html:C,js:n,darkMode:S,action:"hydrate"},"*")):N.data.screenshot?console.log("Got screenshot event, ignoring for now",N):N.data.comment?(d([...g,N.data.comment]),u(ni(N.data.html.trim())),y(!1)):N.data.action==="loaded"&&k(N.data.preview))};return window.addEventListener("message",M),()=>window.removeEventListener("message",M)},[C,g,n,S,u,d,a]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-full rounded-t-xl border bg-background p-4",children:l.jsxs("div",{className:"grid grid-cols-3",children:[l.jsx("div",{className:"col-span-2 items-center justify-center space-x-2 sm:col-span-1",children:l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(X,{onClick:()=>{var M,N;y(!B),(N=(M=o.current)==null?void 0:M.contentWindow)==null||N.postMessage({html:C,action:"toggle-inspector"},"*")},size:"icon",variant:"outline",className:`${B&&"bg-secondary"}`,children:l.jsx("svg",{className:"inline-block h-4 w-4",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 2V0H7V2H5.5ZM0.96967 2.03033L2.46967 3.53033L3.53033 2.46967L2.03033 0.96967L0.96967 2.03033ZM4.24592 4.24592L4.79515 5.75631L7.79516 14.0063L8.46663 15.8529L9.19636 14.0285L10.2739 11.3346L13.4697 14.5303L14.5303 13.4697L11.3346 10.2739L14.0285 9.19636L15.8529 8.46663L14.0063 7.79516L5.75631 4.79516L4.24592 4.24592ZM11.6471 8.53337L10.1194 9.14447C9.6747 9.32235 9.32235 9.6747 9.14447 10.1194L8.53337 11.6471L6.75408 6.75408L11.6471 8.53337ZM0 7H2V5.5H0V7Z",fill:"currentColor"})})})}),l.jsx(de,{children:"Comment on elements in the HTML"})]})}),l.jsxs("div",{className:"col-span-1 hidden items-center justify-center space-x-2 sm:flex",children:[l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsxs(X,{onClick:()=>j("desktop"),size:"icon",variant:"outline",children:[l.jsx("span",{className:"sr-only",children:"Toggle desktop view"}),l.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14v4m-4 1h8M1 10h18M2 1h16a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),l.jsx(de,{children:"Toggle desktop view"})]}),l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsxs(X,{onClick:()=>j("tablet"),variant:"outline",size:"icon",children:[l.jsx("span",{className:"sr-only",children:"Toggle tablet view"}),l.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.5 16.5h3M2 1h14a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),l.jsx(de,{children:"Toggle tablet view"})]}),l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsxs(X,{onClick:()=>j("mobile"),variant:"outline",size:"icon",children:[l.jsx("span",{className:"sr-only",children:"Toggle mobile view"}),l.jsx("svg",{className:"inline-block h-3.5 w-3.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 20",children:l.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 14h12M1 4h12M6.5 16.5h1M2 1h10a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Z"})})]})}),l.jsx(de,{children:"Toggle mobile view"})]})]}),l.jsxs("div",{className:"col-span-1 flex justify-end",children:[l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsxs(X,{onClick:()=>{var M;o.current&&(L(!S),(M=o.current.contentWindow)==null||M.postMessage({action:"toggle-dark-mode"},"*"))},variant:"outline",size:"icon",children:[l.jsx("svg",{"data-toggle-icon":"moon",className:`${!S&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 20",children:l.jsx("path",{d:"M17.8 13.75a1 1 0 0 0-.859-.5A7.488 7.488 0 0 1 10.52 2a1 1 0 0 0 0-.969A1.035 1.035 0 0 0 9.687.5h-.113a9.5 9.5 0 1 0 8.222 14.247 1 1 0 0 0 .004-.997Z"})}),l.jsx("svg",{"data-toggle-icon":"sun",className:`${S&&"hidden"} inline-block h-3.5 w-3.5`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M10 15a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm0-11a1 1 0 0 0 1-1V1a1 1 0 0 0-2 0v2a1 1 0 0 0 1 1Zm0 12a1 1 0 0 0-1 1v2a1 1 0 1 0 2 0v-2a1 1 0 0 0-1-1ZM4.343 5.757a1 1 0 0 0 1.414-1.414L4.343 2.929a1 1 0 0 0-1.414 1.414l1.414 1.414Zm11.314 8.486a1 1 0 0 0-1.414 1.414l1.414 1.414a1 1 0 0 0 1.414-1.414l-1.414-1.414ZM4 10a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h2a1 1 0 0 0 1-1Zm15-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 0-2ZM4.343 14.243l-1.414 1.414a1 1 0 1 0 1.414 1.414l1.414-1.414a1 1 0 0 0-1.414-1.414ZM14.95 6.05a1 1 0 0 0 .707-.293l1.414-1.414a1 1 0 1 0-1.414-1.414l-1.414 1.414a1 1 0 0 0 .707 1.707Z"})}),l.jsx("span",{className:"sr-only",children:"Toggle dark/light mode"})]})}),l.jsx(de,{children:"Toggle dark/light mode"})]}),l.jsxs(Zr,{children:[l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(Yr,{asChild:!0,children:l.jsx(X,{className:"ml-2",variant:"outline",size:"icon",children:l.jsx(Vr,{strokeWidth:1})})})}),l.jsx(de,{children:"View chat history"})]}),l.jsx(Mn,{className:"w-[100%] overflow-scroll sm:max-lg:max-w-[75%] md:max-w-[50%]",children:l.jsxs(Fn,{children:[l.jsx(Pn,{children:"Chat history"}),l.jsx(_n,{asChild:!0,children:l.jsx(z.Suspense,{fallback:l.jsx(rt,{loading:!0}),children:l.jsx(ti,{className:"prose prose-sm prose-zinc max-w-full dark:prose-invert",components:{code(M){const{children:N,className:A,node:v,ref:I,...V}=M,q=/language-(\w+)/.exec(A??"");return q?l.jsx(ei,{className:"max-h-[300px] overflow-scroll text-xs",language:q[1],...V,children:String(N).replace(/\n$/,"")}):l.jsx("code",{children:N})}},children:ii(m)})})})]})})]})]})]})}),l.jsx("div",{className:"code-preview-wrapper",children:l.jsx("div",{className:"code-preview flex border-x bg-background bg-gradient-to-r p-0",children:l.jsxs("div",{className:"code-responsive-wrapper h-[60vh] w-full overflow-auto",children:[l.jsx("iframe",{title:"HTML preview",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-modals",ref:o,className:`iframe-code mx-auto max-h-[60vh] w-full bg-background ${b==="tablet"&&"max-w-lg"} ${b==="mobile"&&"max-w-sm"}`,style:{height:F&&!t?"100%":0},src:`${a}/openui/index.html?buster=113`}),!F&&(i||t?l.jsx(rt,{loading:!0,error:t}):h?l.jsx(Xr,{}):l.jsx(Kr,{onClick:()=>{var M;return(M=s==null?void 0:s.current)==null?void 0:M.click()},onDropFile:M=>{const N=new FileReader;N.onload=()=>c(N.result),N.readAsDataURL(M)}}))]})})})]})}Dn.defaultProps={error:void 0,imageUploadRef:void 0,js:[],rendering:!1};function si({onSubmit:e,placeholder:t="Type your message...",disabled:n=!1,editing:r=!1,onImageUpload:i,onSavePrompt:s,hasScreenshot:a=!1,onRemoveScreenshot:o}){const[m,u]=z.useState(""),[h,c]=z.useState(1),g=z.useRef(null),d=z.useRef(null);z.useEffect(()=>{if(g.current){g.current.style.height="auto";const C=g.current.scrollHeight,P=6,b=24,j=P*b;C>j?(g.current.style.height=`${j}px`,g.current.style.overflowY="auto"):(g.current.style.height=`${C}px`,g.current.style.overflowY="hidden"),c(Math.min(Math.ceil(C/b),P))}},[m]);const S=C=>{C.preventDefault();const P=m.trim();(P||a)&&(e(P),u(""),g.current&&(g.current.style.height="auto"))},L=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),S(C))},F=()=>{u(""),g.current&&(g.current.focus(),g.current.style.height="auto")},k=C=>{var b;const P=(b=C.target.files)==null?void 0:b[0];P&&i&&i(P),d.current&&(d.current.value="")},B=()=>{const C=m.trim();C&&s&&s(C)},y=m.trim()||a;return l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 to-background/0 backdrop-blur-sm"}),l.jsx("div",{className:"relative pointer-events-auto",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-4",children:[a&&l.jsxs("div",{className:"mb-2 flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[l.jsx(Lt,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),l.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Screenshot attached"}),o&&l.jsx(X,{variant:"ghost",size:"sm",onClick:o,className:"ml-auto h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-800/50",children:l.jsx(ar,{className:"h-3 w-3"})})]}),l.jsx("div",{className:"relative bg-background/95 backdrop-blur-xl border border-input rounded-2xl shadow-lg",children:l.jsxs("form",{onSubmit:S,className:"flex items-end gap-2 p-4",children:[l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx(Hr,{ref:g,value:m,onChange:C=>u(C.target.value),onKeyDown:L,placeholder:t,disabled:n,rows:1,className:"min-h-[44px] resize-none border-none bg-transparent text-base placeholder:text-muted-foreground focus-visible:ring-0 focus-visible:ring-offset-0 p-0",style:{maxHeight:"144px"}})}),l.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[i&&l.jsxs(l.Fragment,{children:[l.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:k,className:"hidden"}),l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var C;return(C=d.current)==null?void 0:C.click()},className:"h-8 w-8 p-0 hover:bg-muted",children:l.jsx(Lt,{className:"h-4 w-4"})})}),l.jsx(de,{children:l.jsx("p",{children:"Upload image"})})]})]}),s&&m.trim()&&l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:B,className:"h-8 w-8 p-0 hover:bg-muted",children:l.jsx(Xe,{className:"h-4 w-4"})})}),l.jsx(de,{children:l.jsx("p",{children:"Save prompt"})})]}),m.trim()&&l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:F,className:"h-8 w-8 p-0 hover:bg-muted",children:l.jsx(gt,{className:"h-4 w-4"})})}),l.jsx(de,{children:l.jsx("p",{children:"Clear input"})})]}),l.jsxs(ce,{children:[l.jsx(he,{asChild:!0,children:l.jsx(X,{type:"submit",variant:"default",size:"sm",disabled:!y||n,className:"h-8 w-8 p-0 rounded-full",children:n?l.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):r?l.jsx(or,{className:"h-4 w-4"}):l.jsx(lr,{className:"h-4 w-4"})})}),l.jsx(de,{children:l.jsx("p",{children:r?"Apply changes":"Send message"})})]})]})]})}),l.jsxs("div",{className:"mt-2 text-xs text-muted-foreground text-center",children:["Press ",l.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Enter"})," to send, ",l.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Shift + Enter"})," for new line"]})]})})]})}const Bn=z.forwardRef(({className:e,children:t,...n},r)=>l.jsx("div",{ref:r,className:fe("relative overflow-auto",e),...n,children:t}));Bn.displayName="ScrollArea";const ai=z.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:fe("",e),...t}));ai.displayName="ScrollBar";const oi=hn("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function at({className:e,variant:t,...n}){return l.jsx("div",{className:fe(oi({variant:t}),e),...n})}const Oe=Dr("saved-prompts",[]),Rn=Br(e=>e(Oe),(e,t,n)=>{const r=e(Oe);switch(n.type){case"add":{const i={id:Date.now().toString(),text:n.payload.text,createdAt:new Date,category:n.payload.category,tags:n.payload.tags};t(Oe,[i,...r]);break}case"remove":{t(Oe,r.filter(i=>i.id!==n.payload));break}case"clear":{t(Oe,[]);break}}});function li({onSelectPrompt:e,trigger:t}){const[n,r]=ne(Rn),i=u=>{r({type:"remove",payload:u})},s=()=>{r({type:"clear"})},a=u=>{navigator.clipboard.writeText(u)},o=u=>{e&&e(u.text)},m=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l.jsxs(mn,{children:[l.jsx(fn,{asChild:!0,children:t||l.jsxs(X,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Saved Prompts",n.length>0&&l.jsx(at,{variant:"secondary",className:"ml-1",children:n.length})]})}),l.jsxs(pn,{className:"max-w-2xl max-h-[600px]",children:[l.jsx(gn,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(xn,{className:"flex items-center gap-2",children:[l.jsx(Xe,{className:"h-5 w-5"}),"Saved Prompts"]}),n.length>0&&l.jsxs(X,{variant:"ghost",size:"sm",onClick:s,className:"text-destructive hover:text-destructive",children:[l.jsx(gt,{className:"h-4 w-4 mr-1"}),"Clear All"]})]})}),l.jsx(Bn,{className:"h-[400px] pr-4",children:n.length===0?l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Xe,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No saved prompts yet"}),l.jsx("p",{className:"text-sm mt-1",children:"Save prompts while chatting for quick access"})]}):l.jsx("div",{className:"space-y-3",children:n.map(u=>l.jsx("div",{className:"group relative p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>o(u),children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-foreground line-clamp-3 mb-2",children:u.text}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:m(u.createdAt)}),u.category&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"•"}),l.jsx(at,{variant:"outline",className:"text-xs",children:u.category})]})]}),u.tags&&u.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:u.tags.map((h,c)=>l.jsx(at,{variant:"secondary",className:"text-xs",children:h},c))})]}),l.jsxs(bn,{children:[l.jsx(kn,{asChild:!0,children:l.jsx(X,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 h-8 w-8 p-0",onClick:h=>h.stopPropagation(),children:l.jsx(ur,{className:"h-4 w-4"})})}),l.jsxs(yn,{align:"end",children:[l.jsxs(et,{onClick:h=>{h.stopPropagation(),o(u)},children:[l.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Use Prompt"]}),l.jsxs(et,{onClick:h=>{h.stopPropagation(),a(u.text)},children:[l.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Copy Text"]}),l.jsx(wn,{}),l.jsxs(et,{onClick:h=>{h.stopPropagation(),i(u.id)},className:"text-destructive",children:[l.jsx(gt,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},u.id))})})]})]})}const xe=ze(/[A-Za-z]/),me=ze(/[\dA-Za-z]/),ui=ze(/[#-'*+\--9=?A-Z^-~]/);function xt(e){return e!==null&&(e<32||e===127)}const bt=ze(/\d/),ci=ze(/[\dA-Fa-f]/),hi=ze(/[!-/:-@[-`{-~]/);function T(e){return e!==null&&e<-2}function re(e){return e!==null&&(e<0||e===32)}function H(e){return e===-2||e===-1||e===32}const di=ze(new RegExp("\\p{P}|\\p{S}","u")),mi=ze(/\s/);function ze(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}var On={exports:{}};(function(e){(function(){var t;t=e.exports=i,t.format=i,t.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(t.printf=n);function n(){console.log(i.apply(null,arguments))}function r(s,a){return i.apply(null,[s].concat(a))}function i(s){for(var a=1,o=[].slice.call(arguments),m=0,u=s.length,h="",c,g=!1,d,S,L=!1,F,k=function(){return o[a++]},B=function(){for(var y="";/\d/.test(s[m]);)y+=s[m++],c=s[m];return y.length>0?parseInt(y):null};m<u;++m)if(c=s[m],g)switch(g=!1,c=="."?(L=!1,c=s[++m]):c=="0"&&s[m+1]=="."?(L=!0,m+=2,c=s[m]):L=!0,F=B(),c){case"b":h+=parseInt(k(),10).toString(2);break;case"c":d=k(),typeof d=="string"||d instanceof String?h+=d:h+=String.fromCharCode(parseInt(d,10));break;case"d":h+=parseInt(k(),10);break;case"f":S=String(parseFloat(k()).toFixed(F||6)),h+=L?S:S.replace(/^0/,"");break;case"j":h+=JSON.stringify(k());break;case"o":h+="0"+parseInt(k(),10).toString(8);break;case"s":h+=k();break;case"x":h+="0x"+parseInt(k(),10).toString(16);break;case"X":h+="0x"+parseInt(k(),10).toString(16).toUpperCase();break;default:h+=c;break}else c==="%"?g=!0:h+=c;return h}})()})(On);var fi=On.exports;const pi=dn(fi),Ge=Object.assign(Te(Error),{eval:Te(EvalError),range:Te(RangeError),reference:Te(ReferenceError),syntax:Te(SyntaxError),type:Te(TypeError),uri:Te(URIError)});function Te(e){return t.displayName=e.displayName||e.name,t;function t(n,...r){const i=n&&pi(n,...r);return new e(i)}}const Je={}.hasOwnProperty,Pt={yaml:"-",toml:"+"};function zt(e){const t=[];let n=-1;const r=Array.isArray(e)?e:e?[e]:["yaml"];for(;++n<r.length;)t[n]=gi(r[n]);return t}function gi(e){let t=e;if(typeof t=="string"){if(!Je.call(Pt,t))throw Ge("Missing matter definition for `%s`",t);t={type:t,marker:Pt[t]}}else if(typeof t!="object")throw Ge("Expected matter to be an object, not `%j`",t);if(!Je.call(t,"type"))throw Ge("Missing `type` in matter `%j`",t);if(!Je.call(t,"fence")&&!Je.call(t,"marker"))throw Ge("Missing `marker` or `fence` in matter `%j`",t);return t}function xi(e){const t=zt(e),n={};let r=-1;for(;++r<t.length;){const i=t[r],s=kt(i,"open").charCodeAt(0),a=bi(i),o=n[s];Array.isArray(o)?o.push(a):n[s]=[a]}return{flow:n}}function bi(e){const t=e.anywhere,n=e.type,r=n+"Fence",i=r+"Sequence",s=n+"Value",a={tokenize:h,partial:!0};let o,m=0;return{tokenize:u,concrete:!0};function u(c,g,d){const S=this;return L;function L(j){const M=S.now();return M.column===1&&(M.line===1||t)&&(o=kt(e,"open"),m=0,j===o.charCodeAt(m))?(c.enter(n),c.enter(r),c.enter(i),F(j)):d(j)}function F(j){return m===o.length?(c.exit(i),H(j)?(c.enter("whitespace"),k(j)):B(j)):j===o.charCodeAt(m++)?(c.consume(j),F):d(j)}function k(j){return H(j)?(c.consume(j),k):(c.exit("whitespace"),B(j))}function B(j){return T(j)?(c.exit(r),c.enter("lineEnding"),c.consume(j),c.exit("lineEnding"),o=kt(e,"close"),m=0,c.attempt(a,b,y)):d(j)}function y(j){return j===null||T(j)?P(j):(c.enter(s),C(j))}function C(j){return j===null||T(j)?(c.exit(s),P(j)):(c.consume(j),C)}function P(j){return j===null?d(j):(c.enter("lineEnding"),c.consume(j),c.exit("lineEnding"),c.attempt(a,b,y))}function b(j){return c.exit(n),g(j)}}function h(c,g,d){let S=0;return L;function L(y){return y===o.charCodeAt(S)?(c.enter(r),c.enter(i),F(y)):d(y)}function F(y){return S===o.length?(c.exit(i),H(y)?(c.enter("whitespace"),k(y)):B(y)):y===o.charCodeAt(S++)?(c.consume(y),F):d(y)}function k(y){return H(y)?(c.consume(y),k):(c.exit("whitespace"),B(y))}function B(y){return y===null||T(y)?(c.exit(r),g(y)):d(y)}}}function kt(e,t){return e.marker?_t(e.marker,t).repeat(3):_t(e.fence,t)}function _t(e,t){return typeof e=="string"?e:e[t]}function ki(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function yi(e){const t=zt(e),n={},r={};let i=-1;for(;++i<t.length;){const s=t[i];n[s.type]=wi(s),r[s.type]=ji,r[s.type+"Value"]=Si}return{enter:n,exit:r}}function wi(e){return t;function t(n){this.enter({type:e.type,value:""},n),this.buffer()}}function ji(e){const t=this.resume(),n=this.stack[this.stack.length-1];this.exit(e),n.value=t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,"")}function Si(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}function Ci(e){const t=[],n={},r=zt(e);let i=-1;for(;++i<r.length;){const s=r[i];n[s.type]=vi(s);const a=yt(s,"open");t.push({atBreak:!0,character:a.charAt(0),after:ki(a.charAt(1))})}return{unsafe:t,handlers:n}}function vi(e){const t=yt(e,"open"),n=yt(e,"close");return r;function r(i){return t+(i.value?`
`+i.value:"")+`
`+n}}function yt(e,t){return e.marker?Dt(e.marker,t).repeat(3):Dt(e.fence,t)}function Dt(e,t){return typeof e=="string"?e:e[t]}const Ii="yaml";function zi(e){const t=this,n=e||Ii,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(xi(n)),s.push(yi(n)),a.push(Ci(n))}const Ei={};function Ni(e,t){const n=Ei,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Hn(e,r,i)}function Hn(e,t,n){if(Ti(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Bt(e.children,t,n)}return Array.isArray(e)?Bt(e,t,n):""}function Bt(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Hn(e[i],t,n);return r.join("")}function Ti(e){return!!(e&&typeof e=="object")}const Rt=document.createElement("i");function Et(e){const t="&"+e+";";Rt.innerHTML=t;const n=Rt.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function be(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function le(e,t){return e.length>0?(be(e,e.length,0,t),e):t}const Ot={}.hasOwnProperty;function Ai(e){const t={};let n=-1;for(;++n<e.length;)Li(t,e[n]);return t}function Li(e,t){let n;for(n in t){const i=(Ot.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){Ot.call(i,a)||(i[a]=[]);const o=s[a];Mi(i[a],Array.isArray(o)?o:o?[o]:[])}}}function Mi(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);be(e,0,0,r)}function Vn(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Fe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function U(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(m){return H(m)?(e.enter(n),o(m)):t(m)}function o(m){return H(m)&&s++<i?(e.consume(m),o):(e.exit(n),t(m))}}const Fi={tokenize:Pi};function Pi(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),U(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const m=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=m),n=m,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return T(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const _i={tokenize:Di},Ht={tokenize:Bi};function Di(e){const t=this,n=[];let r=0,i,s,a;return o;function o(y){if(r<n.length){const C=n[r];return t.containerState=C[1],e.attempt(C[0].continuation,m,u)(y)}return u(y)}function m(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&B();const C=t.events.length;let P=C,b;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){b=t.events[P][1].end;break}k(r);let j=C;for(;j<t.events.length;)t.events[j][1].end={...b},j++;return be(t.events,P+1,0,t.events.slice(C)),t.events.length=j,u(y)}return o(y)}function u(y){if(r===n.length){if(!i)return g(y);if(i.currentConstruct&&i.currentConstruct.concrete)return S(y);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ht,h,c)(y)}function h(y){return i&&B(),k(r),g(y)}function c(y){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,S(y)}function g(y){return t.containerState={},e.attempt(Ht,d,S)(y)}function d(y){return r++,n.push([t.currentConstruct,t.containerState]),g(y)}function S(y){if(y===null){i&&B(),k(0),e.consume(y);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),L(y)}function L(y){if(y===null){F(e.exit("chunkFlow"),!0),k(0),e.consume(y);return}return T(y)?(e.consume(y),F(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(y),L)}function F(y,C){const P=t.sliceStream(y);if(C&&P.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(P),t.parser.lazy[y.start.line]){let b=i.events.length;for(;b--;)if(i.events[b][1].start.offset<a&&(!i.events[b][1].end||i.events[b][1].end.offset>a))return;const j=t.events.length;let M=j,N,A;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){if(N){A=t.events[M][1].end;break}N=!0}for(k(r),b=j;b<t.events.length;)t.events[b][1].end={...A},b++;be(t.events,M+1,0,t.events.slice(j)),t.events.length=b}}function k(y){let C=n.length;for(;C-- >y;){const P=n[C];t.containerState=P[1],P[0].exit.call(t,e)}n.length=y}function B(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Bi(e,t,n){return U(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vt(e){if(e===null||re(e)||mi(e))return 1;if(di(e))return 2}function Nt(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const wt={name:"attention",resolveAll:Ri,tokenize:Oi};function Ri(e,t){let n=-1,r,i,s,a,o,m,u,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;m=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const c={...e[r][1].end},g={...e[n][1].start};qt(c,-m),qt(g,m),a={type:m>1?"strongSequence":"emphasisSequence",start:c,end:{...e[r][1].end}},o={type:m>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},s={type:m>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:m>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=le(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=le(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),u=le(u,Nt(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=le(u,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,u=le(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,be(e,r-1,n-r+3,u),n=r+u.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Oi(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vt(r);let s;return a;function a(m){return s=m,e.enter("attentionSequence"),o(m)}function o(m){if(m===s)return e.consume(m),o;const u=e.exit("attentionSequence"),h=Vt(m),c=!h||h===2&&i||n.includes(m),g=!i||i===2&&h||n.includes(r);return u._open=!!(s===42?c:c&&(i||!g)),u._close=!!(s===42?g:g&&(h||!c)),t(m)}}function qt(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Hi={name:"autolink",tokenize:Vi};function Vi(e,t,n){let r=0;return i;function i(d){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(d){return xe(d)?(e.consume(d),a):d===64?n(d):u(d)}function a(d){return d===43||d===45||d===46||me(d)?(r=1,o(d)):u(d)}function o(d){return d===58?(e.consume(d),r=0,m):(d===43||d===45||d===46||me(d))&&r++<32?(e.consume(d),o):(r=0,u(d))}function m(d){return d===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):d===null||d===32||d===60||xt(d)?n(d):(e.consume(d),m)}function u(d){return d===64?(e.consume(d),h):ui(d)?(e.consume(d),u):n(d)}function h(d){return me(d)?c(d):n(d)}function c(d){return d===46?(e.consume(d),r=0,h):d===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(d),e.exit("autolinkMarker"),e.exit("autolink"),t):g(d)}function g(d){if((d===45||me(d))&&r++<63){const S=d===45?g:c;return e.consume(d),S}return n(d)}}const it={partial:!0,tokenize:qi};function qi(e,t,n){return r;function r(s){return H(s)?U(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||T(s)?t(s):n(s)}}const qn={continuation:{tokenize:Ui},exit:Wi,name:"blockQuote",tokenize:$i};function $i(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return H(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Ui(e,t,n){const r=this;return i;function i(a){return H(a)?U(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(qn,t,n)(a)}}function Wi(e){e.exit("blockQuote")}const $n={name:"characterEscape",tokenize:Qi};function Qi(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return hi(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Un={name:"characterReference",tokenize:Zi};function Zi(e,t,n){const r=this;let i=0,s,a;return o;function o(c){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),m}function m(c){return c===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(c),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,a=me,h(c))}function u(c){return c===88||c===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(c),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=ci,h):(e.enter("characterReferenceValue"),s=7,a=bt,h(c))}function h(c){if(c===59&&i){const g=e.exit("characterReferenceValue");return a===me&&!Et(r.sliceSerialize(g))?n(c):(e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(c)&&i++<s?(e.consume(c),h):n(c)}}const $t={partial:!0,tokenize:Gi},Ut={concrete:!0,name:"codeFenced",tokenize:Yi};function Yi(e,t,n){const r=this,i={partial:!0,tokenize:P};let s=0,a=0,o;return m;function m(b){return u(b)}function u(b){const j=r.events[r.events.length-1];return s=j&&j[1].type==="linePrefix"?j[2].sliceSerialize(j[1],!0).length:0,o=b,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(b)}function h(b){return b===o?(a++,e.consume(b),h):a<3?n(b):(e.exit("codeFencedFenceSequence"),H(b)?U(e,c,"whitespace")(b):c(b))}function c(b){return b===null||T(b)?(e.exit("codeFencedFence"),r.interrupt?t(b):e.check($t,L,C)(b)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||T(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(b)):H(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),U(e,d,"whitespace")(b)):b===96&&b===o?n(b):(e.consume(b),g)}function d(b){return b===null||T(b)?c(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(b))}function S(b){return b===null||T(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(b)):b===96&&b===o?n(b):(e.consume(b),S)}function L(b){return e.attempt(i,C,F)(b)}function F(b){return e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),k}function k(b){return s>0&&H(b)?U(e,B,"linePrefix",s+1)(b):B(b)}function B(b){return b===null||T(b)?e.check($t,L,C)(b):(e.enter("codeFlowValue"),y(b))}function y(b){return b===null||T(b)?(e.exit("codeFlowValue"),B(b)):(e.consume(b),y)}function C(b){return e.exit("codeFenced"),t(b)}function P(b,j,M){let N=0;return A;function A(D){return b.enter("lineEnding"),b.consume(D),b.exit("lineEnding"),v}function v(D){return b.enter("codeFencedFence"),H(D)?U(b,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):I(D)}function I(D){return D===o?(b.enter("codeFencedFenceSequence"),V(D)):M(D)}function V(D){return D===o?(N++,b.consume(D),V):N>=a?(b.exit("codeFencedFenceSequence"),H(D)?U(b,q,"whitespace")(D):q(D)):M(D)}function q(D){return D===null||T(D)?(b.exit("codeFencedFence"),j(D)):M(D)}}}function Gi(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const ot={name:"codeIndented",tokenize:Ki},Ji={partial:!0,tokenize:Xi};function Ki(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),U(e,s,"linePrefix",5)(u)}function s(u){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?m(u):T(u)?e.attempt(Ji,a,m)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||T(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function m(u){return e.exit("codeIndented"),t(u)}}function Xi(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):T(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):U(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):T(a)?i(a):n(a)}}const es={name:"codeText",previous:ns,resolve:ts,tokenize:rs};function ts(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function ns(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function rs(e,t,n){let r=0,i,s;return a;function a(c){return e.enter("codeText"),e.enter("codeTextSequence"),o(c)}function o(c){return c===96?(e.consume(c),r++,o):(e.exit("codeTextSequence"),m(c))}function m(c){return c===null?n(c):c===32?(e.enter("space"),e.consume(c),e.exit("space"),m):c===96?(s=e.enter("codeTextSequence"),i=0,h(c)):T(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),m):(e.enter("codeTextData"),u(c))}function u(c){return c===null||c===32||c===96||T(c)?(e.exit("codeTextData"),m(c)):(e.consume(c),u)}function h(c){return c===96?(e.consume(c),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(c)):(s.type="codeTextData",u(c))}}class is{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&He(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),He(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),He(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);He(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);He(this.left,n.reverse())}}}function He(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Wn(e){const t={};let n=-1,r,i,s,a,o,m,u;const h=new is(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(m=r[1]._tokenizer.events,s=0,s<m.length&&m[s][1].type==="lineEndingBlank"&&(s+=2),s<m.length&&m[s][1].type==="content"))for(;++s<m.length&&m[s][1].type!=="content";)m[s][1].type==="chunkText"&&(m[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,ss(h,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=h.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},o=h.slice(i,n),o.unshift(r),h.splice(i,n-i+1,o))}}return be(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!u}function ss(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,m=[],u={};let h,c,g=-1,d=n,S=0,L=0;const F=[L];for(;d;){for(;e.get(++i)[1]!==d;);s.push(i),d._tokenizer||(h=r.sliceStream(d),d.next||h.push(null),c&&a.defineSkip(d.start),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),d._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),c=d,d=d.next}for(d=n;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(L=g+1,F.push(L),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(a.events=[],d?(d._tokenizer=void 0,d.previous=void 0):F.pop(),g=F.length;g--;){const k=o.slice(F[g],F[g+1]),B=s.pop();m.push([B,B+k.length-1]),e.splice(B,2,k)}for(m.reverse(),g=-1;++g<m.length;)u[S+m[g][0]]=S+m[g][1],S+=m[g][1]-m[g][0]-1;return u}const as={resolve:ls,tokenize:us},os={partial:!0,tokenize:cs};function ls(e){return Wn(e),e}function us(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):T(o)?e.check(os,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function cs(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),U(e,s,"linePrefix")}function s(a){if(a===null||T(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Qn(e,t,n,r,i,s,a,o,m){const u=m||Number.POSITIVE_INFINITY;let h=0;return c;function c(k){return k===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(k),e.exit(s),g):k===null||k===32||k===41||xt(k)?n(k):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),L(k))}function g(k){return k===62?(e.enter(s),e.consume(k),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),d(k))}function d(k){return k===62?(e.exit("chunkString"),e.exit(o),g(k)):k===null||k===60||T(k)?n(k):(e.consume(k),k===92?S:d)}function S(k){return k===60||k===62||k===92?(e.consume(k),d):d(k)}function L(k){return!h&&(k===null||k===41||re(k))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(k)):h<u&&k===40?(e.consume(k),h++,L):k===41?(e.consume(k),h--,L):k===null||k===32||k===40||xt(k)?n(k):(e.consume(k),k===92?F:L)}function F(k){return k===40||k===41||k===92?(e.consume(k),L):L(k)}}function Zn(e,t,n,r,i,s){const a=this;let o=0,m;return u;function u(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),e.enter(s),h}function h(d){return o>999||d===null||d===91||d===93&&!m||d===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):d===93?(e.exit(s),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):T(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===null||d===91||d===93||T(d)||o++>999?(e.exit("chunkString"),h(d)):(e.consume(d),m||(m=!H(d)),d===92?g:c)}function g(d){return d===91||d===92||d===93?(e.consume(d),o++,c):c(d)}}function Yn(e,t,n,r,i,s){let a;return o;function o(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),a=g===40?41:g,m):n(g)}function m(g){return g===a?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(s),u(g))}function u(g){return g===a?(e.exit(s),m(a)):g===null?n(g):T(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),U(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===a||g===null||T(g)?(e.exit("chunkString"),u(g)):(e.consume(g),g===92?c:h)}function c(g){return g===a||g===92?(e.consume(g),h):h(g)}}function Ve(e,t){let n;return r;function r(i){return T(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):H(i)?U(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const hs={name:"definition",tokenize:ms},ds={partial:!0,tokenize:fs};function ms(e,t,n){const r=this;let i;return s;function s(d){return e.enter("definition"),a(d)}function a(d){return Zn.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function o(d){return i=Fe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(e.enter("definitionMarker"),e.consume(d),e.exit("definitionMarker"),m):n(d)}function m(d){return re(d)?Ve(e,u)(d):u(d)}function u(d){return Qn(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function h(d){return e.attempt(ds,c,c)(d)}function c(d){return H(d)?U(e,g,"whitespace")(d):g(d)}function g(d){return d===null||T(d)?(e.exit("definition"),r.parser.defined.push(i),t(d)):n(d)}}function fs(e,t,n){return r;function r(o){return re(o)?Ve(e,i)(o):n(o)}function i(o){return Yn(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return H(o)?U(e,a,"whitespace")(o):a(o)}function a(o){return o===null||T(o)?t(o):n(o)}}const ps={name:"hardBreakEscape",tokenize:gs};function gs(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return T(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const xs={name:"headingAtx",resolve:bs,tokenize:ks};function bs(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},be(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function ks(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),s(h)}function s(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&r++<6?(e.consume(h),a):h===null||re(h)?(e.exit("atxHeadingSequence"),o(h)):n(h)}function o(h){return h===35?(e.enter("atxHeadingSequence"),m(h)):h===null||T(h)?(e.exit("atxHeading"),t(h)):H(h)?U(e,o,"whitespace")(h):(e.enter("atxHeadingText"),u(h))}function m(h){return h===35?(e.consume(h),m):(e.exit("atxHeadingSequence"),o(h))}function u(h){return h===null||h===35||re(h)?(e.exit("atxHeadingText"),o(h)):(e.consume(h),u)}}const ys=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Wt=["pre","script","style","textarea"],ws={concrete:!0,name:"htmlFlow",resolveTo:Cs,tokenize:vs},js={partial:!0,tokenize:zs},Ss={partial:!0,tokenize:Is};function Cs(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function vs(e,t,n){const r=this;let i,s,a,o,m;return u;function u(p){return h(p)}function h(p){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(p),c}function c(p){return p===33?(e.consume(p),g):p===47?(e.consume(p),s=!0,L):p===63?(e.consume(p),i=3,r.interrupt?t:f):xe(p)?(e.consume(p),a=String.fromCharCode(p),F):n(p)}function g(p){return p===45?(e.consume(p),i=2,d):p===91?(e.consume(p),i=5,o=0,S):xe(p)?(e.consume(p),i=4,r.interrupt?t:f):n(p)}function d(p){return p===45?(e.consume(p),r.interrupt?t:f):n(p)}function S(p){const K="CDATA[";return p===K.charCodeAt(o++)?(e.consume(p),o===K.length?r.interrupt?t:I:S):n(p)}function L(p){return xe(p)?(e.consume(p),a=String.fromCharCode(p),F):n(p)}function F(p){if(p===null||p===47||p===62||re(p)){const K=p===47,Se=a.toLowerCase();return!K&&!s&&Wt.includes(Se)?(i=1,r.interrupt?t(p):I(p)):ys.includes(a.toLowerCase())?(i=6,K?(e.consume(p),k):r.interrupt?t(p):I(p)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(p):s?B(p):y(p))}return p===45||me(p)?(e.consume(p),a+=String.fromCharCode(p),F):n(p)}function k(p){return p===62?(e.consume(p),r.interrupt?t:I):n(p)}function B(p){return H(p)?(e.consume(p),B):A(p)}function y(p){return p===47?(e.consume(p),A):p===58||p===95||xe(p)?(e.consume(p),C):H(p)?(e.consume(p),y):A(p)}function C(p){return p===45||p===46||p===58||p===95||me(p)?(e.consume(p),C):P(p)}function P(p){return p===61?(e.consume(p),b):H(p)?(e.consume(p),P):y(p)}function b(p){return p===null||p===60||p===61||p===62||p===96?n(p):p===34||p===39?(e.consume(p),m=p,j):H(p)?(e.consume(p),b):M(p)}function j(p){return p===m?(e.consume(p),m=null,N):p===null||T(p)?n(p):(e.consume(p),j)}function M(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||re(p)?P(p):(e.consume(p),M)}function N(p){return p===47||p===62||H(p)?y(p):n(p)}function A(p){return p===62?(e.consume(p),v):n(p)}function v(p){return p===null||T(p)?I(p):H(p)?(e.consume(p),v):n(p)}function I(p){return p===45&&i===2?(e.consume(p),G):p===60&&i===1?(e.consume(p),Q):p===62&&i===4?(e.consume(p),Y):p===63&&i===3?(e.consume(p),f):p===93&&i===5?(e.consume(p),se):T(p)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(js,ee,V)(p)):p===null||T(p)?(e.exit("htmlFlowData"),V(p)):(e.consume(p),I)}function V(p){return e.check(Ss,q,ee)(p)}function q(p){return e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),D}function D(p){return p===null||T(p)?V(p):(e.enter("htmlFlowData"),I(p))}function G(p){return p===45?(e.consume(p),f):I(p)}function Q(p){return p===47?(e.consume(p),a="",J):I(p)}function J(p){if(p===62){const K=a.toLowerCase();return Wt.includes(K)?(e.consume(p),Y):I(p)}return xe(p)&&a.length<8?(e.consume(p),a+=String.fromCharCode(p),J):I(p)}function se(p){return p===93?(e.consume(p),f):I(p)}function f(p){return p===62?(e.consume(p),Y):p===45&&i===2?(e.consume(p),f):I(p)}function Y(p){return p===null||T(p)?(e.exit("htmlFlowData"),ee(p)):(e.consume(p),Y)}function ee(p){return e.exit("htmlFlow"),t(p)}}function Is(e,t,n){const r=this;return i;function i(a){return T(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function zs(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(it,t,n)}}const Es={name:"htmlText",tokenize:Ns};function Ns(e,t,n){const r=this;let i,s,a;return o;function o(f){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(f),m}function m(f){return f===33?(e.consume(f),u):f===47?(e.consume(f),P):f===63?(e.consume(f),y):xe(f)?(e.consume(f),M):n(f)}function u(f){return f===45?(e.consume(f),h):f===91?(e.consume(f),s=0,S):xe(f)?(e.consume(f),B):n(f)}function h(f){return f===45?(e.consume(f),d):n(f)}function c(f){return f===null?n(f):f===45?(e.consume(f),g):T(f)?(a=c,Q(f)):(e.consume(f),c)}function g(f){return f===45?(e.consume(f),d):c(f)}function d(f){return f===62?G(f):f===45?g(f):c(f)}function S(f){const Y="CDATA[";return f===Y.charCodeAt(s++)?(e.consume(f),s===Y.length?L:S):n(f)}function L(f){return f===null?n(f):f===93?(e.consume(f),F):T(f)?(a=L,Q(f)):(e.consume(f),L)}function F(f){return f===93?(e.consume(f),k):L(f)}function k(f){return f===62?G(f):f===93?(e.consume(f),k):L(f)}function B(f){return f===null||f===62?G(f):T(f)?(a=B,Q(f)):(e.consume(f),B)}function y(f){return f===null?n(f):f===63?(e.consume(f),C):T(f)?(a=y,Q(f)):(e.consume(f),y)}function C(f){return f===62?G(f):y(f)}function P(f){return xe(f)?(e.consume(f),b):n(f)}function b(f){return f===45||me(f)?(e.consume(f),b):j(f)}function j(f){return T(f)?(a=j,Q(f)):H(f)?(e.consume(f),j):G(f)}function M(f){return f===45||me(f)?(e.consume(f),M):f===47||f===62||re(f)?N(f):n(f)}function N(f){return f===47?(e.consume(f),G):f===58||f===95||xe(f)?(e.consume(f),A):T(f)?(a=N,Q(f)):H(f)?(e.consume(f),N):G(f)}function A(f){return f===45||f===46||f===58||f===95||me(f)?(e.consume(f),A):v(f)}function v(f){return f===61?(e.consume(f),I):T(f)?(a=v,Q(f)):H(f)?(e.consume(f),v):N(f)}function I(f){return f===null||f===60||f===61||f===62||f===96?n(f):f===34||f===39?(e.consume(f),i=f,V):T(f)?(a=I,Q(f)):H(f)?(e.consume(f),I):(e.consume(f),q)}function V(f){return f===i?(e.consume(f),i=void 0,D):f===null?n(f):T(f)?(a=V,Q(f)):(e.consume(f),V)}function q(f){return f===null||f===34||f===39||f===60||f===61||f===96?n(f):f===47||f===62||re(f)?N(f):(e.consume(f),q)}function D(f){return f===47||f===62||re(f)?N(f):n(f)}function G(f){return f===62?(e.consume(f),e.exit("htmlTextData"),e.exit("htmlText"),t):n(f)}function Q(f){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),J}function J(f){return H(f)?U(e,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f):se(f)}function se(f){return e.enter("htmlTextData"),a(f)}}const Tt={name:"labelEnd",resolveAll:Ms,resolveTo:Fs,tokenize:Ps},Ts={tokenize:_s},As={tokenize:Ds},Ls={tokenize:Bs};function Ms(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&be(e,0,e.length,n),e}function Fs(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const m={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",m,t],["enter",u,t]],o=le(o,e.slice(s+1,s+r+3)),o=le(o,[["enter",h,t]]),o=le(o,Nt(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=le(o,[["exit",h,t],e[a-2],e[a-1],["exit",u,t]]),o=le(o,e.slice(a+1)),o=le(o,[["exit",m,t]]),be(e,s,e.length,o),e}function Ps(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(g){return s?s._inactive?c(g):(a=r.parser.defined.includes(Fe(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),m):n(g)}function m(g){return g===40?e.attempt(Ts,h,a?h:c)(g):g===91?e.attempt(As,h,a?u:c)(g):a?h(g):c(g)}function u(g){return e.attempt(Ls,h,c)(g)}function h(g){return t(g)}function c(g){return s._balanced=!0,n(g)}}function _s(e,t,n){return r;function r(c){return e.enter("resource"),e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),i}function i(c){return re(c)?Ve(e,s)(c):s(c)}function s(c){return c===41?h(c):Qn(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function a(c){return re(c)?Ve(e,m)(c):h(c)}function o(c){return n(c)}function m(c){return c===34||c===39||c===40?Yn(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):h(c)}function u(c){return re(c)?Ve(e,h)(c):h(c)}function h(c){return c===41?(e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),e.exit("resource"),t):n(c)}}function Ds(e,t,n){const r=this;return i;function i(o){return Zn.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Fe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function Bs(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Rs={name:"labelStartImage",resolveAll:Tt.resolveAll,tokenize:Os};function Os(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Hs={name:"labelStartLink",resolveAll:Tt.resolveAll,tokenize:Vs};function Vs(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const lt={name:"lineEnding",tokenize:qs};function qs(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),U(e,t,"linePrefix")}}const tt={name:"thematicBreak",tokenize:$s};function $s(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),m(u)):r>=3&&(u===null||T(u))?(e.exit("thematicBreak"),t(u)):n(u)}function m(u){return u===i?(e.consume(u),r++,m):(e.exit("thematicBreakSequence"),H(u)?U(e,o,"whitespace")(u):o(u))}}const te={continuation:{tokenize:Zs},exit:Gs,name:"list",tokenize:Qs},Us={partial:!0,tokenize:Js},Ws={partial:!0,tokenize:Ys};function Qs(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(d){const S=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:bt(d)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),d===42||d===45?e.check(tt,n,u)(d):u(d);if(!r.interrupt||d===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),m(d)}return n(d)}function m(d){return bt(d)&&++a<10?(e.consume(d),m):(!r.interrupt||a<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(e.exit("listItemValue"),u(d)):n(d)}function u(d){return e.enter("listItemMarker"),e.consume(d),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,e.check(it,r.interrupt?n:h,e.attempt(Us,g,c))}function h(d){return r.containerState.initialBlankLine=!0,s++,g(d)}function c(d){return H(d)?(e.enter("listItemPrefixWhitespace"),e.consume(d),e.exit("listItemPrefixWhitespace"),g):n(d)}function g(d){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(d)}}function Zs(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(it,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,U(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!H(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Ws,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,U(e,e.attempt(te,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Ys(e,t,n){const r=this;return U(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function Gs(e){e.exit(this.containerState.type)}function Js(e,t,n){const r=this;return U(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!H(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Qt={name:"setextUnderline",resolveTo:Ks,tokenize:Xs};function Ks(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function Xs(e,t,n){const r=this;let i;return s;function s(u){let h=r.events.length,c;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){c=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||c)?(e.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),H(u)?U(e,m,"lineSuffix")(u):m(u))}function m(u){return u===null||T(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const ea={tokenize:ta};function ta(e){const t=this,n=e.attempt(it,r,e.attempt(this.parser.constructs.flowInitial,i,U(e,e.attempt(this.parser.constructs.flow,i,e.attempt(as,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const na={resolveAll:Jn()},ra=Gn("string"),ia=Gn("text");function Gn(e){return{resolveAll:Jn(e==="text"?sa:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(h){return u(h)?s(h):o(h)}function o(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),m}function m(h){return u(h)?(n.exit("data"),s(h)):(n.consume(h),m)}function u(h){if(h===null)return!0;const c=i[h];let g=-1;if(c)for(;++g<c.length;){const d=c[g];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function Jn(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function sa(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,m;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)m=!0,o++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const u={type:n===e.length||m||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const aa={42:te,43:te,45:te,48:te,49:te,50:te,51:te,52:te,53:te,54:te,55:te,56:te,57:te,62:qn},oa={91:hs},la={[-2]:ot,[-1]:ot,32:ot},ua={35:xs,42:tt,45:[Qt,tt],60:ws,61:Qt,95:tt,96:Ut,126:Ut},ca={38:Un,92:$n},ha={[-5]:lt,[-4]:lt,[-3]:lt,33:Rs,38:Un,42:wt,60:[Hi,Es],91:Hs,92:[ps,$n],93:Tt,95:wt,96:es},da={null:[wt,na]},ma={null:[42,95]},fa={null:[]},pa=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ma,contentInitial:oa,disable:fa,document:aa,flow:ua,flowInitial:la,insideSpan:da,string:ca,text:ha},Symbol.toStringTag,{value:"Module"}));function ga(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const m={attempt:j(P),check:j(b),consume:B,enter:y,exit:C,interrupt:j(b,{interrupt:!0})},u={code:null,containerState:{},defineSkip:L,events:[],now:S,parser:e,previous:null,sliceSerialize:g,sliceStream:d,write:c};let h=t.tokenize.call(u,m);return t.resolveAll&&s.push(t),u;function c(v){return a=le(a,v),F(),a[a.length-1]!==null?[]:(M(t,0),u.events=Nt(s,u.events,u),u.events)}function g(v,I){return ba(d(v),I)}function d(v){return xa(a,v)}function S(){const{_bufferIndex:v,_index:I,line:V,column:q,offset:D}=r;return{_bufferIndex:v,_index:I,line:V,column:q,offset:D}}function L(v){i[v.line]=v.column,A()}function F(){let v;for(;r._index<a.length;){const I=a[r._index];if(typeof I=="string")for(v=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===v&&r._bufferIndex<I.length;)k(I.charCodeAt(r._bufferIndex));else k(I)}}function k(v){h=h(v)}function B(v){T(v)?(r.line++,r.column=1,r.offset+=v===-3?2:1,A()):v!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=v}function y(v,I){const V=I||{};return V.type=v,V.start=S(),u.events.push(["enter",V,u]),o.push(V),V}function C(v){const I=o.pop();return I.end=S(),u.events.push(["exit",I,u]),I}function P(v,I){M(v,I.from)}function b(v,I){I.restore()}function j(v,I){return V;function V(q,D,G){let Q,J,se,f;return Array.isArray(q)?ee(q):"tokenize"in q?ee([q]):Y(q);function Y(Z){return ke;function ke(ye){const Ce=ye!==null&&Z[ye],ve=ye!==null&&Z.null,Ee=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return ee(Ee)(ye)}}function ee(Z){return Q=Z,J=0,Z.length===0?G:p(Z[J])}function p(Z){return ke;function ke(ye){return f=N(),se=Z,Z.partial||(u.currentConstruct=Z),Z.name&&u.parser.constructs.disable.null.includes(Z.name)?Se():Z.tokenize.call(I?Object.assign(Object.create(u),I):u,m,K,Se)(ye)}}function K(Z){return v(se,f),D}function Se(Z){return f.restore(),++J<Q.length?p(Q[J]):G}}}function M(v,I){v.resolveAll&&!s.includes(v)&&s.push(v),v.resolve&&be(u.events,I,u.events.length-I,v.resolve(u.events.slice(I),u)),v.resolveTo&&(u.events=v.resolveTo(u.events,u))}function N(){const v=S(),I=u.previous,V=u.currentConstruct,q=u.events.length,D=Array.from(o);return{from:q,restore:G};function G(){r=v,u.previous=I,u.currentConstruct=V,u.events.length=q,o=D,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function xa(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function ba(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function ka(e){const r={constructs:Ai([pa,...(e||{}).extensions||[]]),content:i(Fi),defined:[],document:i(_i),flow:i(ea),lazy:{},string:i(ra),text:i(ia)};return r;function i(s){return a;function a(o){return ga(r,s,o)}}}function ya(e){for(;!Wn(e););return e}const Zt=/[\0\t\n\r]/g;function wa(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const m=[];let u,h,c,g,d;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),c=0,t="",n&&(s.charCodeAt(0)===65279&&c++,n=void 0);c<s.length;){if(Zt.lastIndex=c,u=Zt.exec(s),g=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(g),!u){t=s.slice(c);break}if(d===10&&c===g&&r)m.push(-3),r=void 0;else switch(r&&(m.push(-5),r=void 0),c<g&&(m.push(s.slice(c,g)),e+=g-c),d){case 0:{m.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,m.push(-2);e++<h;)m.push(-1);break}case 10:{m.push(-4),e=1;break}default:r=!0,e=1}c=g+1}return o&&(r&&m.push(-5),t&&m.push(t),m.push(null)),m}}const ja=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Sa(e){return e.replace(ja,Ca)}function Ca(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Vn(n.slice(s?2:1),s?16:10)}return Et(n)||e}function qe(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Yt(e.position):"start"in e||"end"in e?Yt(e):"line"in e||"column"in e?jt(e):""}function jt(e){return Gt(e&&e.line)+":"+Gt(e&&e.column)}function Yt(e){return jt(e&&e.start)+"-"+jt(e&&e.end)}function Gt(e){return e&&typeof e=="number"?e:1}const Kn={}.hasOwnProperty;function va(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ia(n)(ya(ka(n).document().write(wa()(e,t,!0))))}function Ia(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ye),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(_e),blockQuote:s(ve),characterEscape:N,characterReference:N,codeFenced:s(Ee),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Ee,a),codeText:s(Pe,a),codeTextData:N,data:N,codeFlowValue:N,definition:s(Le),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(We),hardBreakEscape:s(Qe),hardBreakTrailing:s(Qe),htmlFlow:s(Ze,a),htmlFlowData:N,htmlText:s(Ze,a),htmlTextData:N,image:s(st),label:a,link:s(Ye),listItem:s(R),listItemValue:g,listOrdered:s(E,c),listUnordered:s(E),paragraph:s(W),reference:p,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(_e),strong:s(pe),thematicBreak:s(De)},exit:{atxHeading:m(),atxHeadingSequence:P,autolink:m(),autolinkEmail:Ce,autolinkProtocol:ye,blockQuote:m(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:Se,characterReferenceMarkerNumeric:Se,characterReferenceValue:Z,characterReference:ke,codeFenced:m(F),codeFencedFence:L,codeFencedFenceInfo:d,codeFencedFenceMeta:S,codeFlowValue:A,codeIndented:m(k),codeText:m(D),codeTextData:A,data:A,definition:m(),definitionDestinationString:C,definitionLabelString:B,definitionTitleString:y,emphasis:m(),hardBreakEscape:m(I),hardBreakTrailing:m(I),htmlFlow:m(V),htmlFlowData:A,htmlText:m(q),htmlTextData:A,image:m(Q),label:se,labelText:J,lineEnding:v,link:m(G),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:K,resourceDestinationString:f,resourceTitleString:Y,resource:ee,setextHeading:m(M),setextHeadingLineSequence:j,setextHeadingText:b,strong:m(),thematicBreak:m()}};Xn(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(x){let w={type:"root",children:[]};const _={stack:[w],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:h,data:n},O=[];let $=-1;for(;++$<x.length;)if(x[$][1].type==="listOrdered"||x[$][1].type==="listUnordered")if(x[$][0]==="enter")O.push($);else{const ue=O.pop();$=i(x,ue,$)}for($=-1;++$<x.length;){const ue=t[x[$][0]];Kn.call(ue,x[$][1].type)&&ue[x[$][1].type].call(Object.assign({sliceSerialize:x[$][2].sliceSerialize},_),x[$][1])}if(_.tokenStack.length>0){const ue=_.tokenStack[_.tokenStack.length-1];(ue[1]||Jt).call(_,void 0,ue[0])}for(w.position={start:Ie(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:Ie(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},$=-1;++$<t.transforms.length;)w=t.transforms[$](w)||w;return w}function i(x,w,_){let O=w-1,$=-1,ue=!1,Ne,we,Be,Re;for(;++O<=_;){const ae=x[O];switch(ae[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ae[0]==="enter"?$++:$--,Re=void 0;break}case"lineEndingBlank":{ae[0]==="enter"&&(Ne&&!Re&&!$&&!Be&&(Be=O),Re=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Re=void 0}if(!$&&ae[0]==="enter"&&ae[1].type==="listItemPrefix"||$===-1&&ae[0]==="exit"&&(ae[1].type==="listUnordered"||ae[1].type==="listOrdered")){if(Ne){let Me=O;for(we=void 0;Me--;){const je=x[Me];if(je[1].type==="lineEnding"||je[1].type==="lineEndingBlank"){if(je[0]==="exit")continue;we&&(x[we][1].type="lineEndingBlank",ue=!0),je[1].type="lineEnding",we=Me}else if(!(je[1].type==="linePrefix"||je[1].type==="blockQuotePrefix"||je[1].type==="blockQuotePrefixWhitespace"||je[1].type==="blockQuoteMarker"||je[1].type==="listItemIndent"))break}Be&&(!we||Be<we)&&(Ne._spread=!0),Ne.end=Object.assign({},we?x[we][1].start:ae[1].end),x.splice(we||O,0,["exit",Ne,ae[2]]),O++,_++}if(ae[1].type==="listItemPrefix"){const Me={type:"listItem",_spread:!1,start:Object.assign({},ae[1].start),end:void 0};Ne=Me,x.splice(O,0,["enter",Me,ae[2]]),O++,_++,Be=void 0,Re=!0}}}return x[w][1]._spread=ue,_}function s(x,w){return _;function _(O){o.call(this,x(O),O),w&&w.call(this,O)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(x,w,_){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([w,_||void 0]),x.position={start:Ie(w.start),end:void 0}}function m(x){return w;function w(_){x&&x.call(this,_),u.call(this,_)}}function u(x,w){const _=this.stack.pop(),O=this.tokenStack.pop();if(O)O[0].type!==x.type&&(w?w.call(this,x,O[0]):(O[1]||Jt).call(this,x,O[0]));else throw new Error("Cannot close `"+x.type+"` ("+qe({start:x.start,end:x.end})+"): it’s not open");_.position.end=Ie(x.end)}function h(){return Ni(this.stack.pop())}function c(){this.data.expectingFirstListItemValue=!0}function g(x){if(this.data.expectingFirstListItemValue){const w=this.stack[this.stack.length-2];w.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function d(){const x=this.resume(),w=this.stack[this.stack.length-1];w.lang=x}function S(){const x=this.resume(),w=this.stack[this.stack.length-1];w.meta=x}function L(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function F(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x.replace(/(\r?\n|\r)$/g,"")}function B(x){const w=this.resume(),_=this.stack[this.stack.length-1];_.label=w,_.identifier=Fe(this.sliceSerialize(x)).toLowerCase()}function y(){const x=this.resume(),w=this.stack[this.stack.length-1];w.title=x}function C(){const x=this.resume(),w=this.stack[this.stack.length-1];w.url=x}function P(x){const w=this.stack[this.stack.length-1];if(!w.depth){const _=this.sliceSerialize(x).length;w.depth=_}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function j(x){const w=this.stack[this.stack.length-1];w.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function N(x){const _=this.stack[this.stack.length-1].children;let O=_[_.length-1];(!O||O.type!=="text")&&(O=oe(),O.position={start:Ie(x.start),end:void 0},_.push(O)),this.stack.push(O)}function A(x){const w=this.stack.pop();w.value+=this.sliceSerialize(x),w.position.end=Ie(x.end)}function v(x){const w=this.stack[this.stack.length-1];if(this.data.atHardBreak){const _=w.children[w.children.length-1];_.position.end=Ie(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(w.type)&&(N.call(this,x),A.call(this,x))}function I(){this.data.atHardBreak=!0}function V(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function q(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function D(){const x=this.resume(),w=this.stack[this.stack.length-1];w.value=x}function G(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const w=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=w,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function Q(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const w=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=w,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function J(x){const w=this.sliceSerialize(x),_=this.stack[this.stack.length-2];_.label=Sa(w),_.identifier=Fe(w).toLowerCase()}function se(){const x=this.stack[this.stack.length-1],w=this.resume(),_=this.stack[this.stack.length-1];if(this.data.inReference=!0,_.type==="link"){const O=x.children;_.children=O}else _.alt=w}function f(){const x=this.resume(),w=this.stack[this.stack.length-1];w.url=x}function Y(){const x=this.resume(),w=this.stack[this.stack.length-1];w.title=x}function ee(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function K(x){const w=this.resume(),_=this.stack[this.stack.length-1];_.label=w,_.identifier=Fe(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function Se(x){this.data.characterReferenceType=x.type}function Z(x){const w=this.sliceSerialize(x),_=this.data.characterReferenceType;let O;_?(O=Vn(w,_==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):O=Et(w);const $=this.stack[this.stack.length-1];$.value+=O}function ke(x){const w=this.stack.pop();w.position.end=Ie(x.end)}function ye(x){A.call(this,x);const w=this.stack[this.stack.length-1];w.url=this.sliceSerialize(x)}function Ce(x){A.call(this,x);const w=this.stack[this.stack.length-1];w.url="mailto:"+this.sliceSerialize(x)}function ve(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function Pe(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function We(){return{type:"emphasis",children:[]}}function _e(){return{type:"heading",depth:0,children:[]}}function Qe(){return{type:"break"}}function Ze(){return{type:"html",value:""}}function st(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function E(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function R(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function W(){return{type:"paragraph",children:[]}}function pe(){return{type:"strong",children:[]}}function oe(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function Ie(e){return{line:e.line,column:e.column,offset:e.offset}}function Xn(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Xn(e,r):za(e,r)}}function za(e,t){let n;for(n in t)if(Kn.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Jt(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+qe({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+qe({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+qe({start:t.start,end:t.end})+") is still open")}function Ea(e){const t=this;t.parser=n;function n(r){return va(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Kt(e){if(e)throw e}var nt=Object.prototype.hasOwnProperty,er=Object.prototype.toString,Xt=Object.defineProperty,en=Object.getOwnPropertyDescriptor,tn=function(t){return typeof Array.isArray=="function"?Array.isArray(t):er.call(t)==="[object Array]"},nn=function(t){if(!t||er.call(t)!=="[object Object]")return!1;var n=nt.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&nt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||nt.call(t,i)},rn=function(t,n){Xt&&n.name==="__proto__"?Xt(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},sn=function(t,n){if(n==="__proto__")if(nt.call(t,n)){if(en)return en(t,n).value}else return;return t[n]},Na=function e(){var t,n,r,i,s,a,o=arguments[0],m=1,u=arguments.length,h=!1;for(typeof o=="boolean"&&(h=o,o=arguments[1]||{},m=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});m<u;++m)if(t=arguments[m],t!=null)for(n in t)r=sn(o,n),i=sn(t,n),o!==i&&(h&&i&&(nn(i)||(s=tn(i)))?(s?(s=!1,a=r&&tn(r)?r:[]):a=r&&nn(r)?r:{},rn(o,{name:n,newValue:e(h,a,i)})):typeof i<"u"&&rn(o,{name:n,newValue:i}));return o};const ut=dn(Na);function St(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ta(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(m,...u){const h=e[++s];let c=-1;if(m){a(m);return}for(;++c<i.length;)(u[c]===null||u[c]===void 0)&&(u[c]=i[c]);i=u,h?Aa(h,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Aa(e,t){let n;return r;function r(...a){const o=e.length>a.length;let m;o&&a.push(i);try{m=e.apply(this,a)}catch(u){const h=u;if(o&&n)throw h;return i(h)}o||(m&&m.then&&typeof m.then=="function"?m.then(s,i):m instanceof Error?i(m):s(m))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}class ie extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const m=r.indexOf(":");m===-1?s.ruleId=r:(s.source=r.slice(0,m),s.ruleId=r.slice(m+1))}if(!s.place&&s.ancestors&&s.ancestors){const m=s.ancestors[s.ancestors.length-1];m&&(s.place=m.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=o?o.line:void 0,this.name=qe(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ie.prototype.file="";ie.prototype.name="";ie.prototype.reason="";ie.prototype.message="";ie.prototype.stack="";ie.prototype.column=void 0;ie.prototype.line=void 0;ie.prototype.ancestors=void 0;ie.prototype.cause=void 0;ie.prototype.fatal=void 0;ie.prototype.place=void 0;ie.prototype.ruleId=void 0;ie.prototype.source=void 0;const ge={basename:La,dirname:Ma,extname:Fa,join:Pa,sep:"/"};function La(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ue(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function Ma(e){if(Ue(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Fa(e){Ue(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Pa(...e){let t=-1,n;for(;++t<e.length;)Ue(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":_a(n)}function _a(e){Ue(e);const t=e.codePointAt(0)===47;let n=Da(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Da(e,t){let n="",r=0,i=-1,s=0,a=-1,o,m;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(m=n.lastIndexOf("/"),m!==n.length-1){m<0?(n="",r=0):(n=n.slice(0,m),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Ue(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ba={cwd:Ra};function Ra(){return"/"}function Ct(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Oa(e){if(typeof e=="string")e=new URL(e);else if(!Ct(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ha(e)}function Ha(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const ct=["history","path","basename","stem","extname","dirname"];class Va{constructor(t){let n;t?Ct(t)?n={path:t}:typeof t=="string"||qa(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ba.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ct.length;){const s=ct[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)ct.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ge.basename(this.path):void 0}set basename(t){dt(t,"basename"),ht(t,"basename"),this.path=ge.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ge.dirname(this.path):void 0}set dirname(t){an(this.basename,"dirname"),this.path=ge.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ge.extname(this.path):void 0}set extname(t){if(ht(t,"extname"),an(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ge.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ct(t)&&(t=Oa(t)),dt(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ge.basename(this.path,this.extname):void 0}set stem(t){dt(t,"stem"),ht(t,"stem"),this.path=ge.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ie(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ht(e,t){if(e&&e.includes(ge.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ge.sep+"`")}function dt(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function an(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qa(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $a=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Ua={}.hasOwnProperty;class At extends $a{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ta()}copy(){const t=new At;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ut(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(pt("data",this.frozen),this.namespace[t]=n,this):Ua.call(this.namespace,t)&&this.namespace[t]||void 0:t?(pt("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ke(t),r=this.parser||this.Parser;return mt("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),mt("process",this.parser||this.Parser),ft("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=Ke(t),m=r.parse(o);r.run(m,o,function(h,c,g){if(h||!c||!g)return u(h);const d=c,S=r.stringify(d,g);Za(S)?g.value=S:g.result=S,u(h,g)});function u(h,c){h||!c?a(h):s?s(c):n(void 0,c)}}}processSync(t){let n=!1,r;return this.freeze(),mt("processSync",this.parser||this.Parser),ft("processSync",this.compiler||this.Compiler),this.process(t,i),ln("processSync","process",n),r;function i(s,a){n=!0,Kt(s),r=a}}run(t,n,r){on(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const m=Ke(n);i.run(t,m,u);function u(h,c,g){const d=c||t;h?o(h):a?a(d):r(void 0,d,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),ln("runSync","run",r),i;function s(a,o){Kt(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=Ke(n),i=this.compiler||this.Compiler;return ft("stringify",i),on(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(pt("use",this.frozen),t!=null)if(typeof t=="function")m(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")m(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[h,...c]=u;m(h,c)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=ut(!0,i.settings,u.settings))}function o(u){let h=-1;if(u!=null)if(Array.isArray(u))for(;++h<u.length;){const c=u[h];s(c)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function m(u,h){let c=-1,g=-1;for(;++c<r.length;)if(r[c][0]===u){g=c;break}if(g===-1)r.push([u,...h]);else if(h.length>0){let[d,...S]=h;const L=r[g][1];St(L)&&St(d)&&(d=ut(!0,L,d)),r[g]=[u,d,...S]}}}}const Wa=new At().freeze();function mt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ft(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function pt(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function on(e){if(!St(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ln(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ke(e){return Qa(e)?e:new Va(e)}function Qa(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Za(e){return typeof e=="string"||Ya(e)}function Ya(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function Ga(e,t={}){var o,m;const n={},r=Wa().use(Ea).use(zi).parse(e.replace("```yaml\n",""));let i;for(const u of r.children){if(u.type==="yaml"){i=u;break}if(u.type==="heading"&&u.children[0].type==="text"&&u.children[0].value.includes("name: ")){[i]=u.children;break}}if(!i&&r.children[0]&&(r.children[0].type==="heading"||r.children[0].type==="paragraph")&&(i=r.children[0].children[0]),i){const u=(o=i.value.split(`
`).find(c=>c.startsWith("name: ")))==null?void 0:o.replace("name: ",""),h=(m=i.value.split(`
`).find(c=>c.startsWith("emoji: ")))==null?void 0:m.replace("emoji: ","");n.name=u,n.emoji=h}else e.length>50&&!t.emoji&&console.warn("No frontmatter",e.slice(0,100));const s=r.children.filter(u=>u.type==="code"||u.type==="html");for(const u of r.children)if(u.type==="paragraph"){let h="";if(u.children[0].type==="html")for(const c of u.children)h=h+c.value||"";s.push({type:"code",lang:"html",value:h})}const a=r.children.filter(u=>u.type==="code"&&u.lang==="javascript");return n.html=[...s.map(u=>u.value),...a.map(u=>`<script type="text/javascript">${u.value}<\/script>`)].join(`
`),n}const Ja="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ka=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Ja[n[e]&63];return t};function Xa(e){let t=e.replaceAll("-gray-","-zinc-");return t=t.replaceAll("via.placeholder.com","placehold.co"),t=t.replaceAll(/"[^"]*\.(mp3|wav)"|'[^']*\.(mp3|wav)'/g,'"'+document.location.origin+'/openui/funky.mp3"'),t=t.replaceAll(/<!--[\s\S]*?-->/g,""),t}function tr(e){try{const{childNodes:t}=e;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===Node.COMMENT_NODE?r.remove():r.nodeType===Node.ELEMENT_NODE&&tr(r)}}catch(t){console.error(t)}}function un(e){return console.log("New Chapter called",e),`

---
prompt: ${e}
---

`}function nr({shared:e}){const t=cn(),[n,r]=cr(),i=hr(),s=t.id??"new",[a,o]=ne(Ar),[m,u]=z.useState(a),[h,c]=ne($e({id:s})),[g,d]=ne(En),[S,L]=ne(Nn),[F,k]=ne(vt),[B,y]=ne(jn),C=Sr(),P=Ae(Er),b=Ae(Nr),j=Ae(Tr),M=z.useRef(null),N=(h.markdown??"").split(/---\nprompt:.+\n---/gm).pop(),[A,v]=z.useState(N??""),[I,V]=z.useState(h.html??""),[q,D]=z.useState(),[G,Q]=z.useState([]),[J,se]=z.useState(A!==""),[f,Y]=z.useState(!1),[ee,p]=z.useState(A!==""),K=J?"refine":"create",[Se,Z]=z.useState([]),ke=Ae(Rr),[ye,Ce]=ne(Rn),ve=Mr(A),Ee=Fr(`(min-width: ${Pr}px)`);z.useEffect(()=>{},[I,h]),z.useEffect(()=>{e&&(async()=>{const E=await Cr(s);c(E),V(E.html??"")})().catch(E=>{console.error(E),setTimeout(()=>D(E.toString()),1e3)})},[e,s,c]),z.useEffect(()=>{m.length!==a.length&&(C(),u(a))},[a,m.length,C]),z.useEffect(()=>{se((A||"").trim()!=="")},[A]),z.useEffect(()=>{if(t.id==="new"){D(void 0),d(""),v(""),Q([]),p(!1);return}window._item=h,v((h.markdown??"").split(/---\nprompt:.+\n---/gm).pop()??"")},[t.id]);const Pe=z.useCallback(E=>{E.trim()!==""&&(console.log("Saving:",E),c(R=>({...R,markdown:(R.markdown??"")+E})),C())},[C,c]),Le=z.useCallback((E,R,W=!1)=>{Y(!0),v(""),d(""),D(void 0),Z([]),(ke?vr:Ir)({query:E,model:P,action:K,systemPrompt:j,html:W?void 0:R,image:W?void 0:F,temperature:b},oe=>{v(De=>(De||"")+oe)},ke?oe=>{Z(De=>[...De,oe])}:void 0).then(oe=>{k(""),Y(!1),Pe(typeof oe=="string"?oe:oe.response||"")}).catch(oe=>{Y(!1),k(""),Pe(""),console.error(oe),D(oe.message)})},[P,K,F,j,v,Y,D,d,Pe,b,ke]);z.useEffect(()=>{const E=n.get("gen")==="1",R=n.get("clear")==="true";E&&!h.markdown&&!f&&(r(new URLSearchParams,{preventScrollReset:!0,replace:!0}),Le(h.prompt,void 0,R))},[h,f,r,n,Le]),z.useEffect(()=>{try{if(!A||t.id==="new"){V("");return}D(void 0);const E=Ga(A,{name:h.name,emoji:h.emoji});E.html?(c(R=>({...R,...E})),V(Xa(E.html))):f||D("No HTML in response.  View the response in the chat history.")}catch(E){c(R=>({...R,name:"Error"})),console.error(E)}},[ve]),z.useEffect(()=>{const E=W=>{W.shiftKey&&se(!1)},R=W=>{W.key==="Shift"&&se(A!=="")};return document.addEventListener("keydown",E),document.addEventListener("keyup",R),()=>{document.removeEventListener("keydown",E),document.removeEventListener("keyup",R)}},[A]);const We=z.useCallback((E,R=!0)=>{const W=Ka();v(""),$e({id:W,prompt:E,createdAt:new Date}),o(pe=>[W,...pe]),i(`/ai/${W}?gen=1&clear=${R}`)},[i,o]),_e=async E=>{if(!(F===""&&E==="")){if(K==="create"){We(E,F==="");return}v(""),console.log("Submit",h.name),c(R=>({...R,markdown:R.markdown+un(E),prompts:[...R.prompts??[R.prompt],E]})),Le(E,I)}},Qe=E=>{const R=new FileReader;R.onload=()=>k(R.result),R.readAsDataURL(E)},Ze=E=>{Ce({type:"add",payload:{text:E,category:J?"UI Modification":"UI Creation",tags:[P,K]}})},st=()=>{k("")};function Ye(E){const R=E.querySelectorAll("script"),W=[];for(const pe of R)W.push({text:pe.innerHTML,src:pe.src,type:pe.type});return W}return z.useEffect(()=>{if(t.id==="new"){V("");return}const R=new DOMParser().parseFromString(I,"text/html");tr(R.body),c(W=>({...W,html:R.body.innerHTML})),Q(Ye(R))},[I,c,t.id,h.name]),z.useEffect(()=>{if(!B)return;const E=B;y(void 0),Y(!0);const R=h.components??{};zr({model:P,framework:E,html:I,temperature:b},W=>{c(pe=>(R[E]===void 0&&(R[E]=""),R[E]+=W,{...pe,components:{...R}}))}).then(()=>{C(),Y(!1)}).catch(W=>{Y(!1),console.error(W)})},[B,c,C,y,h.components,P,I,b]),z.useEffect(()=>{g!==""&&(c(E=>({...E,markdown:E.markdown+un(S[0])})),L([]),Le("",g))},[g,S]),l.jsxs("div",{className:"flex-col bg-secondary",children:[l.jsxs("div",{className:"p-2",children:[l.jsx(Dn,{id:s,html:I,js:G,error:q,imageUploadRef:M,rendering:f}),l.jsx(Qr,{id:s,code:I,shared:e??!1}),a.length<=2&&l.jsx(An,{className:fe("absolute left-[calc(50%)] w-11/12 -translate-x-1/2",ee&&"-bottom-10 opacity-0"),style:{bottom:Ee?"130px":"230px"},callback:E=>{We(E)}})]}),l.jsx(X,{onClick:()=>{p(!ee)},variant:"ghost",size:"icon",className:"absolute left-[calc(50%-1.25rem)] z-10 hover:scale-125 hover:animate-pulse hover:bg-transparent",style:{bottom:`${Ee?10:100}px`},children:ee?l.jsx(dr,{className:"inline-block h-5 w-5"}):l.jsx(mr,{className:"inline-block h-5 w-5"})}),!ee&&l.jsx(si,{onSubmit:_e,placeholder:J?"Ask for changes to the current UI":F?"Describe the screenshot you uploaded (Optional)":"Describe a UI you desire",disabled:f,editing:J,onImageUpload:Qe,onSavePrompt:Ze,hasScreenshot:!!F,onRemoveScreenshot:st}),l.jsx("div",{className:"fixed top-4 right-4 z-50",children:l.jsx(li,{onSelectPrompt:E=>{_e(E)}})})]})}nr.defaultProps={shared:!1};const ao=Object.freeze(Object.defineProperty({__proto__:null,default:nr},Symbol.toStringTag,{value:"Module"}));export{ao as B,ie as V,me as a,Va as b,Ea as r,Wa as u};
